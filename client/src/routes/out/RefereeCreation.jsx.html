<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RefereeCreation.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: RefereeCreation.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useContext } from "react";
import Copyright from "./../components/Copyright.component";
import ResponsiveAppBar from './../components/LoggedInAppBar';
import Box from '@mui/material/Box';
import { TeamList } from "../components/TeamList";
import { UsersContext } from "../context/UserContex";
import { useNavigate } from "react-router-dom";
import { AuthContext } from "../context/authContext";
import { useState, useEffect } from "react";
import UserFinder from "../apis/UserFinder";
import CircularProgress from '@mui/material/CircularProgress';
import CreateReferee from "../components/CreateReferee.component";

const myStyle={
     background: "#F5F1ED",
     height:'50',
     fontSize:'24px',
     backgroundSize: 'cover',
  };

const RefereeCreatePage = () => {
  const navigate = useNavigate();
  const [isLoading, setLoading] = useState(true)

  const {user, setUser} = useContext(UsersContext)
  const {setAuth} = useContext(AuthContext)
  const getData = async () => {
    try {
      await UserFinder.get(`/users/1`, {headers: {'jwt_token': localStorage.token}})
      .then(userData =>{
        let val = {
          id: userData.data.data.user_id,
          mail: userData.data.data.mail,
          name: userData.data.data.name,
          surname: userData.data.data.surname,
          role: userData.data.data.role,
        }
        setUser(val)
      })
    } catch (err) {
      console.error(err.message);
    }
  };

  /**
   * This function checks if the user is authenticated and performs
   * additional actions based on the result of the verification.
   *
   * @async
   * @returns {Promise&lt;void>} An asynchronous promise that resolves when the function has finished executing.
   *
   * @throws {Error} If there is an error verifying the user's authentication status.
   *
   * @example
   * await checkAuthenticated();
   */
  const checkAuthenticated = async () => {
    try {
      const res = await UserFinder.post("/verify", {}, {headers: {'jwt_token': localStorage.token}})
      if (res.data.isAuth === true){
        await getData();
        await setAuth(true);
        setLoading(false)
      }
      else{
        await setAuth(false);
        navigate("/")
      } 
    } catch (err) {
      console.error(err.message);
      await setAuth(false);
      navigate("/")
    }
  };

  useEffect(() => {
    checkAuthenticated();
  }, []);
  if(isLoading || user === undefined){
    return (
      &lt;div>
        &lt;Box m={0} pt={34}> &lt;/Box>
        &lt;center> &lt;CircularProgress />&lt;/center>
      &lt;/div>
    );
  }
  else if(user.role == "TFF Admin"){
    return (
      &lt;div style = {myStyle}>
        &lt;ResponsiveAppBar/>
        &lt;CreateReferee/>
        &lt;Box m={0} pt={10}> &lt;/Box>
      &lt;/div>
    );
  }
  else if(user.role == "Reporter" || user.role == "Retired Referee"){
    navigate("/profile/")
  }
  else{
    return (
      &lt;div>
        &lt;Box m={0} pt={34}> &lt;/Box>
        &lt;center> &lt;CircularProgress />&lt;/center>
      &lt;/div>
    );
  }
}
   
  export default RefereeCreatePage;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Wed Dec 14 2022 01:48:28 GMT+0300 (GMT+03:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
